<div id="xzbjd">
<div id="xzbjd_title">
    <span ng-if="processzhuti.item.id==undefined||processzhuti.item.id==''">新建审批流</span>
    <span ng-if="processzhuti.item.id!=undefined&&processzhuti.item.id!=''">编辑审批流</span>
</div>
<!--消息-->
<div id="gzrl_dlcg" style="width: 98%; margin-top: 10px;">
    <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="alert.close()">
        <span data-ng-bind-html="alert.msg"></span>
    </alert>
</div>
<form name="form" >
<div id="xzbjd_jbxx">
    <table border="0" cellpadding="0" cellspacing="0" class="xzbjd_jbxx_table xzbjd_jbxx_table">
        <tbody>
        <tr>
            <td colspan="2" style="border:0px">
                <span class="tnz_kong"></span>
                <strong>基本信息</strong>
            </td>
        </tr>
        <tr>
            <td class="xzbjd_jbxx_table_hui">
                <span  ng-class="{required:form.shenpileixing.$invalid}">*</span>审批类型
                <span class="tnz_kong"></span>
            </td>
            <td class="xzbjd_jbxx_table_bai">
                <span class="tnz_kong"></span>
                <select ng-model="processzhuti.item.shenpileixing" name="shenpileixing" class="tnz_select" required>
                    <option value="">--请选择--</option>
                    <option value="33">离职审批</option>
                    <option value="13">请假(7天以内)审批</option>
                    <option value="73">报销审批</option>
                    <option value="75">物资审批</option>
                    <option value="28">请假(7天以上)审批</option>
                    <option value="100">更改为1审批</option>
                </select>
            </td>
            <td  colspan="2" style="border:0px">
            </td>
        </tr>
        <tr  ng-if="processzhuti.item.shenpileixing!=73">
            <td class="xzbjd_jbxx_table_hui">
                <span  ng-class="{required:form.belong_city.$invalid}">*</span>所属城市
                <span class="tnz_kong"></span>
            </td>
            <td class="xzbjd_jbxx_table_bai">
                <span class="tnz_kong"></span>
                <select ng-model="processzhuti.item.belong_city" name="belong_city" class="tnz_select" required
                        ng-options="d as d for d  in city_lists">
                    <option value="">--请选择--</option>
                    <!--<option value="上海市">上海市</option>
                    <option value="杭州市">杭州市</option>
                    <option value="北京市">北京市</option>
                    <option value="天津市">天津市</option>
                    <option value="广州市">广州市</option>
                    <option value="南京市">南京市</option>
                    <option value="义乌市">义乌市</option>
                    <option value="宁波市">宁波市</option>-->
                </select>
            </td>
            <td  colspan="2" style="border:0px">
            </td>
        </tr>
        <tr>
            <td class="xzbjd_jbxx_table_hui">
                审批状态
                <span class="tnz_kong"></span>
            </td>
            <td class="xzbjd_jbxx_table_bai">
           <!--     <div class="zdytjzdnr_table_sf01">
                    <div class="zdytjzdnr_table_left"  style="width: 100px"><input ng-model="hetongmoban.item.isDefault" name="shifouyanzheng" value="1" type="radio" checked="checked" /></div>
                    <div class="zdytjzdnr_table_right" style="width: 100px">启用</div>
                    <div class="clear"></div>
                </div>
                <div class="zdytjzdnr_table_sf02">
                    <div class="zdytjzdnr_table_left"  style="width: 100px"><input ng-model="hetongmoban.item.isDefault" name="shifouyanzheng" value="0" type="radio" /></div>
                    <div class="zdytjzdnr_table_right" style="width: 100px">禁用</div>
                    <div class="clear"></div>
                </div>-->

                <div class="zdytjzdnr_table_zdm_01">
                    <input class="icheck"  ng-model="processzhuti.item.status"   name="status"  type="radio" value="1"/>启用
                    <span class="tnz_kong"></span>

                    <input class="icheck"   ng-model="processzhuti.item.status" name="status" type="radio" value="0"/>禁用
                    <span class="tnz_kong"></span>
                </div>



            </td>
            <td  colspan="2" style="border:0px">
            </td>
        </tr>
      <!--  <tr>
            <td class="xzbjd_jbxx_table_hui">
                通知形式
                <span class="tnz_kong"></span>
            </td>
            <td class="xzbjd_jbxx_table_bai">
                <div class="zdytjzdnr_table_zdm_01">
                    <input type="checkbox" ng-model="processzhuti.item.iszhanleixin_notice" name="iszhanleixin_notice" ng-true-value="1" ng-false-value="0"/>站内信通知
                    <span class="tnz_kong"></span>


                    <input type="checkbox" ng-model="processzhuti.item.isduanxin_notice" name="isduanxin_notice" ng-true-value="1" ng-false-value="0"/>短信通知
                    <span class="tnz_kong"></span>


                    <input type="checkbox" ng-model="processzhuti.item.isyoujian_notice" name="isyoujian_notice" ng-true-value="1" ng-false-value="0"/>邮件通知
                    <span class="tnz_kong"></span>

                </div>
            </td>
            <td  colspan="2" style="border:0px">
            </td>
        </tr>-->

        </tbody>
    </table>
</div>

<div id="xzbjd_jbxx4">
    <table border="0" cellpadding="0" cellspacing="0" class="zdytjzdnr_table4 xzbjd_jbxx_table">
        <tbody>
        <tr>
            <td colspan="3" style="border:0px" >
                <span class="tnz_kong"></span>
                <strong>审批流程</strong>
            </td>
        </tr>

        <tr>
            <td class="xzbjd_jbxx_table_bai1">
                序号
                <span class="tnz_kong"></span>
            </td>
            <td class="xzbjd_jbxx_table_bai2">
                审批人
            </td>
            <td class="xzbjd_jbxx_table_bai3">
                操作
            </td>
            <td  colspan="1" style="border:0px">
            </td>
        </tr>
        <tr ng-repeat="d in processzhuti.list">
            <td class="xzbjd_jbxx_table_bai1" >
                {{d.index=$index+1}}
                <span class="tnz_kong"></span>
            </td>
            <td class="xzbjd_jbxx_table_bai2" >
              <span class="tnz_kong" ng-repeat="p in d.shenpirenlist">
                {{p.shenpiren}}
               </span>
            </td>
            <td class="xzbjd_jbxx_table_bai3">
                <span class="tnz_kong"></span>
                <a href ng-click="processzhuti.tianjiashenpirens(d)">添加审批人</a>
                <a href ng-click="processzhuti.deletehang($index)">删除</a>
                <a href ng-click="processzhuti.tianjiashenpirens(d)">编辑</a>
            </td>
            <td  colspan="1" style="border:0px">
            </td>
        </tr>

        <tr>
            <td colspan="3">
                <div class="pull-left" style="margin:0 0 10px 10px;">
                    <button type="button" class="btn btn-primary green" ng-click="processzhuti.zengjiahang()">
                        <span class="glyphicon glyphicon-plus"></span>增加一行
                    </button>
                </div>
                <div class="clear"></div>
            </td>
        </tr>

        </tbody>
    </table>

    <div class="col-md-12">
        <div class="form-group">
            <div class="col-md-offset-4 col-md-4">
                <input ng-disabled="form.$invalid" type="button" class="zdytjzdnr_table_reset" value="保存" ng-click="processzhuti.save()"/>
                &nbsp;&nbsp;<input type="reset" class="zdytjzdnr_table_reset" value="返回" ng-click="$root.settings.utils.back()"/>
            </div>
        </div>
    </div>

</div>

<div class="xzbjd_cpxx" style="position:relative;">
<!--审批流程-->

    <!--<table border="0" cellpadding="0" cellspacing="0" class="xzbjd_jbxx_table zdytjzdnr_table">
    <tbody>
    <tr style="width:50%;height: auto">
        <td colspan="3">
            <span class="tnz_kong"></span>
            <strong>审批流程</strong>
        </td>
    </tr>
    <tr style="width:50%;height: auto">
        <td style="width:10%;height: auto">
            <span class="tnz_kong"></span>
            序号
        </td>
        <td colspan="1" style="width:30%;height: auto">
            <span class="tnz_kong"></span>
            审批人
        </td>
        <td style="width:10%;height: auto">
            <span class="tnz_kong"></span>
            操作
        </td>

    </tr>


    <tr ng-repeat="d in processzhuti.list">
        <td style="width:10%;height: auto">
            <span class="tnz_kong"></span>
            {{d.index=$index+1}}
        </td>
        <td colspan="1" style="width:30%;height: auto">
            <span class="tnz_kong" ng-repeat="p in d.shenpirenlist">
                {{p.shenpiren}}
            </span>


        </td>
        <td style="width:10%;height: auto">
            <span class="tnz_kong"></span>
            <a href ng-click="processzhuti.tianjiashenpirens(d)">添加审批人</a>
            <a href ng-click="processzhuti.deletehang($index)">删除</a>
            <a href ng-click="processzhuti.tianjiashenpirens(d)">编辑</a>
        </td>
    </tr>
    <tr>
        <td colspan="3">
            <div class="pull-left" style="margin:0 0 10px 10px;">
                <button type="button" class="btn btn-primary" ng-click="processzhuti.zengjiahang()">
                    <span class="glyphicon glyphicon-plus"></span>增加一行
                </button>
             </div>
            <div class="clear"></div>
        </td>
    </tr>
    </tbody>
</table>
 <div class="col-md-12">
        <div class="form-group">
            <div class="col-md-offset-10 col-md-4">
                <button type="button" class="btn btn-primary" ng-disabled="!form.$valid" ng-click="processzhuti.save()">
                    <span class="glyphicon glyphicon-ok"></span> 保存
                </button>

                &nbsp;&nbsp;<input type="reset" class="zdytjzdnr_table_reset" value="返回" ng-click="back()"/>
            </div>
        </div>
    </div>-->

<!--    <table border="0" cellpadding="0" cellspacing="0" class="xzbjd_cpxx_table zdytjzdnr_table">
        <tbody>
        <tr>
            <td colspan="11">
                <span class="tnz_kong"></span>
                <strong>审批流程</strong>
            </td>
        </tr>
        <tr>
            <td>
                <span class="tnz_kong"></span>
                序号
            </td>
            <td colspan="3">
                <span class="tnz_kong"></span>
                审批人
            </td>
            <td>
                <span class="tnz_kong"></span>
                操作
            </td>

        </tr>


        <tr ng-repeat="d in processzhuti.list">
            <td>
                <span class="tnz_kong"></span>
                {{d.index=$index+1}}
            </td>
            <td colspan="3">
            <span class="tnz_kong" ng-repeat="p in d.shenpirenlist">
                {{p.shenpiren}}
            </span>


            </td>
            <td>
                <span class="tnz_kong"></span>
                <a href ng-click="processzhuti.tianjiashenpirens(d)">添加审批人</a>
                <a href ng-click="processzhuti.deletehang($index)">删除</a>
                <a href ng-click="processzhuti.tianjiashenpirens(d)">编辑</a>
            </td>
        </tr>
        <tr>
            <td colspan="11">
                <div class="pull-left" style="margin:0 0 10px 10px;">
                    <button type="button" class="btn btn-primary" ng-click="processzhuti.zengjiahang()">
                        <span class="glyphicon glyphicon-plus"></span>增加一行
                    </button>
              </div>
                <div class="clear"></div>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="col-md-12">
        <div class="form-group">
            <div class="col-md-offset-10 col-md-4">
                <button type="button" class="btn btn-primary" ng-disabled="!form.$valid" ng-click="processzhuti.save()">
                    <span class="glyphicon glyphicon-ok"></span> 保存
                </button>

                &nbsp;&nbsp;<input type="reset" class="zdytjzdnr_table_reset" value="返回" ng-click="back()"/>
            </div>
        </div>
    </div>-->



<div ng-if="hetongdingdan.item.processstatus=='2'" style="position: absolute;right: 2%;bottom: 20px;">
    <img src="images/audit.png">
</div>
</div>
</form>

</div>




<script type="text/ng-template" id="warehouse-add.html">
    <form name="form">
        <div style="padding: 5px 5px 0px 30px">
            <span style="font-size:18px;">添加人员</span>
            <div style="float:right;" ><a href ng-click="cancel()"><span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span></a></div>
        </div>
        <div class="zdytjzdnr" style="overflow: auto;">
            <!--消息-->
            <div id="gzrl_dlcg" style="width: 100%; margin-top: 10px;">
                <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="alert.close()">
                    <span data-ng-bind-html="alert.msg"></span>
                </alert>
            </div>
            <div class="col-md-12" style="margin-top: 10px;" ng-repeat="post in warehouse.postList">
                <div class="two-title" style="margin-left: 0;background-color: #eeeeee;">
                    <span><input type="checkbox" style="margin-top: 0;" ng-model="post.checked" ng-click="warehouse.checkPost(post)" /><span style="vertical-align: top;">{{post.name}}</span></span>
                </div>
                <div class="col-md-4" style="padding-left: 0;" ng-repeat="user in post.users">
                    <span><input type="checkbox" style="margin-top: 0;" ng-model="user.checked" /><span style="vertical-align: top">{{user.value_name}}</span></span>
                </div>
            </div>
            <div class="col-md-12" style="margin-top: 10px;text-align: center;">
                <input type="submit" class="btn btn-primary" value="保存" ng-click="submit()" ng-disabled="form.$invalid"/>
                <input type="reset" class="zdytjzdnr_table_reset" value="取消" ng-click="cancel()"/>
            </div>
        </div>
    </form>
</script>




<!--右侧内容部分导航-->

<!--右侧头部搜索部分-->
<!--<div class="row" style="border:2px solid #e1e1e1;padding-top: 15px;">
    <form class="form-horizontal" name="form">
        <div class="col-md-12 ">
            <div class="col-md-1">
                <button type="button" class="btn btn-default btn-xs" ng-click="processzhuti.zengjiahang()">
                    <span class="glyphicon glyphicon-plus"></span>增加一行
                </button>
            </div>
        </div>

        <div class="col-md-12">
            <div class="col-md-3">
                <div class="form-group" style="display: block">
                    <label class="col-md-4 control-label lm_lbl">审批类型</label>
                    <div class="col-md-8">
                        <select ng-model="processzhuti.item.shenpileixing" class="form-control lm_form">
                            <option value="">--请选择--</option>
                            <option value="33">采购合同审批</option>
                            <option value="13">销售合同审批</option>
                            <option value="73">出库审批</option>
                            <option value="28">采购申请审批</option>
                            <option value="68">入库审批</option>
                            <option value="38">采购退货单审批</option>
                            <option value="8">报价审批</option>
                            <option value="18">销售退货审批</option>
                            <option value="78">调拨审批</option>
                            <option value="93">盘点审批</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-md-12">
            <div class="row   " >
                <table class="table table-condensed  table-striped table-hover">
                    <thead>
                    <tr>
                        <th><span class="lm_tablespan"> </span></th>
                        <th>条件</th>
                        <th>审批人</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="d in processzhuti.list">
                        <td><span class="lm_tablespan"> {{d.index=$index+1}}</span></td>
                        <td><input ng-model="d.tiaojian" type="text" style="width: 200px;"
                                   class="form-control lm_form"/></td>
                        <td>
                            <table>
                                <td ng-repeat="p in d.shenpirenlist">
                                    <input ng-model="p.shenpiren" ng-click="processzhuti.openxiaoshouren(p)" type="text" style="width: 60px;" class="form-control lm_form"/>
                                </td>
                            </table>
                        </td>
                        <td>
                            <a href ng-click="processzhuti.tianjiashenpiren(d)">添加审批人</a>
                            <a href ng-click="processzhuti.deletehang($index)">删除</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-12">
            <div class="form-group">
                <div class="col-md-offset-11 col-md-2">
                    <button type="button" class="btn btn-default btn-xs" ng-disabled="!form.$valid" ng-click="processzhuti.save()">
                        <span class="glyphicon glyphicon-ok"></span> 保存
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>-->
<style >
    .app-modal-window-customer .modal-dialog{
        width: 60%;
    }
</style>



<!-- 供应商列表 -->
<script type="text/ng-template" id="user-list.html">
   <div style="padding: 5px 5px 0px 30px"><span style="font-size:18px;">选择人员</span>
        <div style="float:right;" ><a href ng-click="cancel()"><span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span></a></div>
    </div>

    <div id="zzjg" class="container_top15">
        <!--<style type="text/css">
            .ztree li span.button.add {margin-left:2px; margin-right: -1px; background-position:-144px 0; vertical-align:top; *vertical-align:middle}
        </style>-->
        <div class="container-fluid" style="margin-top:10px;">
            <div class="row-fluid">
                <div class="span12">

                    <div class="row-fluid" style="background-color:#fff">
                        <div class="clearfix" style="margin-top:0px;">
                            <div class="condition span12" style="margin-left:0px;padding:15px;">
                                <div class="bulk-actions align-left">
                                    <!--<a href="#">部门岗位图</a> |-->
                                    <!--<a href="#" style="color:#333333;">上下级关系图</a>-->
                                    <div id="pns_left">
                                        <div class="btn-group pns_left_dan">
                                            <a class="btn dropdown-toggle btn-primary" href data-toggle="dropdown">
                                                <i class="glyphicon glyphicon-search"></i>
                                                <span style="font-size: 12px;font-weight: bold">按类别查看</span>
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a href ng-click="user.searchByType('all')">全部</a></li>
                                                <li><a href ng-click="user.searchByType('1')">管理员</a></li>
                                                <li><a href ng-click="user.searchByType('2')">员工</a></li>
                                            </ul>
                                        </div>
                                        <div class="clear"></div>
                                    </div>

                                </div>
                            </div>
                            <div class="clear"></div>
                            <div class="condition span12" style="margin-left:0px;padding:15px;">
                                <!--消息-->
                                <div id="gzrl_dlcgo" style="width: 100%; margin-top: 10px;">
                                    <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="alert.close()">
                                        <span data-ng-bind-html="alert.msg"></span>
                                    </alert>
                                </div>
                                <table class="table table-hover table-striped ">
                                    <thead>
                                    <tr>
                                        <th>登录名</th>
                                        <th>用户姓名</th>
                                        <th>岗位</th>
                                        <th>手机</th>
                                        <th>性别</th>
                                      <!--  <th>Email</th>
                                        <th>联系地址</th>-->
                                    </tr>
                                    </thead>
                                    <tfoot>
                                    <tr>
                                        <td colspan="8">
                                            <p>
                                                提示:
                                                <img src="images/admin_img.png" style="width:16px;">
                                                管理员用户
                                            </p>
                                        </td>
                                    </tr>
                                    </tfoot>
                                    <tbody>
                                    <tr ng-if="user.dataList.length==0">
                                        <td colspan="8"> ----暂无数据！----</td>
                                    </tr>
                                    <tr ng-if="user.dataList.length>0" ng-repeat="d in user.dataList" ng-click="user.xuan(d)">
                                        <td>
                                            {{d.name}}
                                            <span ng-if="d.category_id=='1'"><img src="images/admin_img.png" style="width:13px;height:16px;"></span>
                                        </td>
                                        <td>{{d.real_name}}</td>
                                        <td>{{d.department_name}} - {{d.position_name}}</td>
                                        <td>{{d.telephone}}</td>
                                        <td>{{d.sex=='1'&&'男'||d.sex=='0'&&'女'||''}}</td>
                                       <!-- <td>{{d.email}}</td>
                                        <td>{{d.address}}</td>-->
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--分页foot-->
                            <div>
                                <div class="plczkh_neirong_xia_xia_left">
                                    共{{user.searchForm.page.totalItems}}条记录{{user.searchForm.page.currentPage}}/{{user.searchForm.page.totalPages}}页
                                </div>
                                <div class="plczkh_neirong_xia_xia_mid">

                                    <pagination boundary-links="true" total-items="user.searchForm.page.totalItems"      items-per-page="user.searchForm.page.itemsperpage"  ng-model="user.searchForm.page.currentPage"  max-size="5" num-pages
                                                class="pagination-sm" previous-text="&lt;&lt;上一页" next-text="下一页&gt;&gt;"
                                                first-text="首页"
                                                last-text="尾页"></pagination>
                                    <div class="clear"></div>
                                </div>
                                <div class="plczkh_neirong_xia_xia_right">
                                    跳转至第<input ng-model="goto" type="number" class="t1"><input class="b1" type="button" ng-click="user.searchCurrent(goto)"/>页
                                </div>
                                <div class="clear"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div>
        <div class="tnb_submit">
            <input type="submit" class="zdytjzdnr_table_submit" value="确定" ng-click="submit()"/>
            <input type="reset" class="zdytjzdnr_table_reset" value="取消" ng-click="cancel()"/>
            <div class="clear"></div>
        </div>
    </div>
</script>


<!-- 树形弹窗 -->
<script type="text/ng-template" id="shenpiren.html">
    <div class="modal-header lm_window_head" >
        <p class="p1" >   选择人员</p>
        <p class="p2" >  <button class="btn btn-xs" ng-click="cancel()">关闭</button></p>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12">
                <div ui-tree data-drag-enabled="false" id="zuzhi-tree-root2">
                    <ol ui-tree-nodes="" ng-model="processzhuti.treedata">
                        <li ng-repeat="node in processzhuti.treedata" ui-tree-node
                            ng-include="'zuzhi_nodes_renderer.html'"></li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer lm_window_footer" >
        <button class="btn btn-xs" ng-click="cancel()">取消</button>
        <!--<button class="btn btn-xs" ng-click="selectNode(this)">确认</button>-->
    </div>
</script>

<script type="text/ng-template" id="zuzhi_nodes_renderer.html">
    <div  ui-tree-handle ng-class="node.bgcolor">
        <a   ng-click="zuzhitree.toggle2(this)"  style="cursor: pointer"><span><span ng-show="node.collapsed" class="glyphicon glyphicon-plus"></span><span ng-show="!(node.collapsed)" class="glyphicon glyphicon-minus"></span></span></a>
        <a ng-if="node.obj.keyongzhuangtai=='0'" href ng-click="selectNode(this)" style="color:red">{{node.title}}</a>
        <a ng-if="node.obj.keyongzhuangtai=='1'" href ng-click="selectNode(this)" >{{node.title}}</a>
    </div>
    <ol ui-tree-nodes=""  ng-model="node.nodes" ng-show="!(node.collapsed)" style="padding-left:20px">
        <li ng-repeat="node in node.nodes"   ui-tree-node ng-include="'zuzhi_nodes_renderer.html'"  ng-if="zuzhi.searchForm.includejinyong||!(zuzhi.searchForm.includejinyong)&&node.obj.keyongzhuangtai=='1'">
        </li>
    </ol>
</script>
<div ui-tree data-drag-enabled="false" style="padding-left:0" id="zuzhi-tree-root">
    <ol ui-tree-nodes="" ng-model="zuzhitree.data" style="padding-left:0">
        <li ng-repeat="node in zuzhitree.data"  style="margin-right: 0"  ui-tree-node ng-include="'zuzhi_nodes_renderer.html'"></li>
    </ol>
</div>
<!-- 树形弹窗结束 -->